## 卷积神经网络中对图片进行的操作及影响整理



### 流程总览

原始图像 → 标准化 → 卷积 → 池化 → 卷积 → 池化 → 展平 → 全连接 → 全连接 → 输出



### 具体流程

### **原始输入状态**

格式类型: PIL图像或numpy数组
数据形状: (28, 28) 或 (1, 28, 28)
数值范围: [0, 255] (uint8整数)
数据内容: 原始灰度像素值
存储格式: 二维数组或三维数组

### **ToTensor转换后**

操作: `transforms.ToTensor()`
格式类型: PyTorch张量
数据形状: [1, 28, 28] (训练时为 [64, 1, 28, 28])
数据变化:

数据类型: uint8 → float32

- 数值缩放: [0,255] → [0.0,1.0]
- 维度顺序: (H,W)或(H,W,C) → (C,H,W)
- 存储格式: **数组 → 张量**

意义：将格式转化为Pytorch可以处理的类型

### **Normalize标准化后**

操作: `transforms.Normalize((0.1307,), (0.3081,))`
格式类型: PyTorch张量
数据形状: [64, 1, 28, 28]
数值范围: 约 [-0.424, 2.822] (float32浮点数)
数据变化:

- 数值变换: (pixel - 0.1307) / 0.3081
- 分布特性: 均值≈0, 标准差≈1

### **第一层卷积后**

操作: `x = F.relu(self.conv1(x))`
格式类型: 特征图张量
数据形状: [64, 6, 28, 28] 
数值范围: [0, ∞) (float32浮点数)
数据变化:

- 通道数: 1 → 6
- 空间信息: 保持28×28空间结构
- 数值特性: 负值归零，正值保持

意义：局部特征提取，提取边缘、角度等特征

### **第一层池化后**

操作: `x = F.avg_pool2d(x, 2)`
格式类型: 特征图张量
数据形状: [64, 6, 14, 14]
数值范围: [0, ∞) (float32浮点数)
数据变化:

- 空间尺寸: 28×28 → 14×14 (减少75%)
- 数据压缩: 局部平均，减少细节

### **第二层卷积后**

操作: `x = F.relu(self.conv2(x))`
格式类型: 高级特征图张量
数据形状: [64, 16, 10, 10]
数值范围: [0, ∞) (float32浮点数)
数据变化:

- 通道数: 6 → 16
- 空间尺寸: 14×14 → 10×10
- 特征复杂度: 增加特征组合层次

意义：压缩图像，保留重要信息

### **第二层池化后**

操作: `x = F.avg_pool2d(x, 2)`
格式类型: 压缩特征图张量
数据形状: [64, 16, 5, 5]
数值范围: [0, ∞) (float32浮点数)
数据变化:

- 空间尺寸: 10×10 → 5×5 (减少75%)
- 信息密度: 高度压缩的特征表示

意义：提取更复杂的局部特征

### **展平操作后**

操作: `x = x.view(-1, 16 * 5 * 5)`
格式类型: 特征向量张量
数据形状: [64, 400]
数值范围: [0, ∞) (float32浮点数)
数据变化:

- 维度转换: 3D特征图 → 1D特征向量
- 格式转换: **空间张量 → 数值向量**
- 信息类型: 空间信息转换为数值序列

意义：为分类决策准备输入格式

### **第一个全连接层后**

操作: `x = F.relu(self.fc1(x))`
格式类型: 抽象特征向量张量
数据形状: [64, 120]
数值范围: [0, ∞) (float32浮点数)
数据变化:

- 特征维度: 400 → 120 (压缩66.7%)
- 特征抽象: 全局特征组合
- 格式保持: 特征向量张量格式

意义：将局部部件组合成完整数字概念，学习特征之间的复杂关系

### **第二个全连接层后**

操作: `x = F.relu(self.fc2(x))`
格式类型: 精炼特征向量张量
数据形状: [64, 84]
数值范围: [0, ∞) (float32浮点数)
数据变化: 特征维度: 120 → 84 (压缩30%)

意义：特征精炼:，去除冗余信息

### 第三个全连接层/**输出层**

操作: `x = self.fc3(x)`
格式类型: 分类得分张量
数据形状: [64, 10]
数值范围: (-∞, ∞) (float32浮点数)
数据变化:

- 特征维度: 84 → 10
- 格式转换: **特征向量 → 分类得分**
- 输出类型: 原始得分(logits)，未经softmax

意义：产生10个类别的得分

### 后续变化

后续模型的训练/测试中，inputs中的数据经过`.item`等操作，将张量中的数值提取出来进行后面的计算
